import { findPoly } from "./polylines.js";

test("findPoly", () => {
  const route = {
    db_index: [1],
    distance: 2296,
    duration: 840,
    end: {
      address: "College Green, Dublin 2, Ireland",
      location: {
        lat: 53.3443633,
        lng: -6.2593112,
      },
      time: 1596479488,
    },
    start: {
      address: "Blackhall Pl, Northside, Dublin, Ireland",
      location: {
        lat: 53.3486857,
        lng: -6.282002599999999,
      },
      time: 1596478648,
    },
    steps: [
      {
        distance: 109,
        duration: 77,
        mode: "WALKING",
        polyline: ["itrdIn}ie@TDp@FH@b@H`@F\\HLB"],
        start: {
          lat: 53.3486857,
          lng: -6.282002599999999,
        },
        stop: {
          lat: 53.3477145,
          lng: -6.2822356,
        },
      },
      {
        distance: 1858,
        duration: 504,
        mode: "TRANSIT",
        polyline: [
          "cnrdIf~ie@CXfDx@B_@j@wKfAgJLeA\\yCXsC?CDi@Ba@N_CFcAF}@Dq@HmA?GDcADaBB}@?k@@a@?Y?wAEmBCm@AWCe@IiA?CKwA?IEs@Ee@OqBAWC]M_BOuBC[EkBCsAQwEGy@Ew@?MCq@IqAGo@QoAQuACMCQm@iEc@}CAEOgAIc@e@wCQaAQ}@AQIe@NEHIFCz@]JGJERGJGLOJOVe@NW?AKU",
        ],
        start: {
          lat: 53.34770409999999,
          lng: -6.2821238,
        },
        stop: {
          lat: 53.3465812,
          lng: -6.2581256,
        },
        transit: {
          arr: {
            name: "D'Olier Street",
            time: 1596479230,
          },
          dep: {
            name: "Blackhall Place, stop 1715",
            time: 1596478726,
          },
          headsign: "UCD",
          operator: "Dublin Bus",
          route: "39a",
          type: "BUS",
        },
      },
      {
        distance: 329,
        duration: 246,
        mode: "WALKING",
        polyline: [
          "wfrdI~hee@h@}@P[HQPY\\i@FI",
          "ybrdIdcee@DCDAB?B?D@B@DDDF@FHRBJ@LFZNp@Lh@Lh@HJTn@^t@",
          "i}qdIzmee@J?H@FBD@DBDBDFFHDFFDDDFDF@H@FAB?HC",
        ],
        start: {
          lat: 53.3465171,
          lng: -6.2582432,
        },
        stop: {
          lat: 53.3443633,
          lng: -6.2593112,
        },
      },
    ],
    transit_index: [1],
  };
  const polyline = findPoly(route);
  expect(polyline).toEqual([
    [
      [
        { lat: 53.34869, lng: -6.282 },
        { lat: 53.34858, lng: -6.28203 },
        { lat: 53.34833, lng: -6.28207 },
        { lat: 53.34828, lng: -6.28208 },
        { lat: 53.3481, lng: -6.28213 },
        { lat: 53.34793, lng: -6.28217 },
        { lat: 53.34778, lng: -6.28222 },
        { lat: 53.34771, lng: -6.28224 },
      ],
    ],
    [
      [
        { lat: 53.3477, lng: -6.28212 },
        { lat: 53.34772, lng: -6.28225 },
        { lat: 53.34688, lng: -6.28254 },
        { lat: 53.34686, lng: -6.28238 },
        { lat: 53.34664, lng: -6.28034 },
        { lat: 53.34628, lng: -6.27854 },
        { lat: 53.34621, lng: -6.27819 },
        { lat: 53.34606, lng: -6.27742 },
        { lat: 53.34593, lng: -6.27668 },
        { lat: 53.34593, lng: -6.27666 },
        { lat: 53.3459, lng: -6.27645 },
        { lat: 53.34588, lng: -6.27628 },
        { lat: 53.3458, lng: -6.27564 },
        { lat: 53.34576, lng: -6.2753 },
        { lat: 53.34572, lng: -6.27499 },
        { lat: 53.34569, lng: -6.27474 },
        { lat: 53.34564, lng: -6.27435 },
        { lat: 53.34564, lng: -6.27431 },
        { lat: 53.34561, lng: -6.27397 },
        { lat: 53.34558, lng: -6.27348 },
        { lat: 53.34556, lng: -6.27317 },
        { lat: 53.34556, lng: -6.27295 },
        { lat: 53.34555, lng: -6.27278 },
        { lat: 53.34555, lng: -6.27265 },
        { lat: 53.34555, lng: -6.27221 },
        { lat: 53.34558, lng: -6.27166 },
        { lat: 53.3456, lng: -6.27143 },
        { lat: 53.34561, lng: -6.27131 },
        { lat: 53.34563, lng: -6.27112 },
        { lat: 53.34568, lng: -6.27075 },
        { lat: 53.34568, lng: -6.27073 },
        { lat: 53.34574, lng: -6.27029 },
        { lat: 53.34574, lng: -6.27024 },
        { lat: 53.34577, lng: -6.26998 },
        { lat: 53.3458, lng: -6.26979 },
        { lat: 53.34588, lng: -6.26922 },
        { lat: 53.34589, lng: -6.2691 },
        { lat: 53.34591, lng: -6.26895 },
        { lat: 53.34598, lng: -6.26847 },
        { lat: 53.34606, lng: -6.26788 },
        { lat: 53.34608, lng: -6.26774 },
        { lat: 53.34611, lng: -6.2672 },
        { lat: 53.34613, lng: -6.26678 },
        { lat: 53.34622, lng: -6.2657 },
        { lat: 53.34626, lng: -6.26541 },
        { lat: 53.34629, lng: -6.26513 },
        { lat: 53.34629, lng: -6.26506 },
        { lat: 53.34631, lng: -6.26481 },
        { lat: 53.34636, lng: -6.2644 },
        { lat: 53.3464, lng: -6.26416 },
        { lat: 53.34649, lng: -6.26376 },
        { lat: 53.34658, lng: -6.26333 },
        { lat: 53.3466, lng: -6.26326 },
        { lat: 53.34662, lng: -6.26317 },
        { lat: 53.34685, lng: -6.26216 },
        { lat: 53.34703, lng: -6.26137 },
        { lat: 53.34704, lng: -6.26134 },
        { lat: 53.34712, lng: -6.26098 },
        { lat: 53.34717, lng: -6.2608 },
        { lat: 53.34736, lng: -6.26004 },
        { lat: 53.34745, lng: -6.25971 },
        { lat: 53.34754, lng: -6.2594 },
        { lat: 53.34755, lng: -6.25931 },
        { lat: 53.3476, lng: -6.25912 },
        { lat: 53.34752, lng: -6.25909 },
        { lat: 53.34747, lng: -6.25904 },
        { lat: 53.34743, lng: -6.25902 },
        { lat: 53.34713, lng: -6.25887 },
        { lat: 53.34707, lng: -6.25883 },
        { lat: 53.34701, lng: -6.2588 },
        { lat: 53.34691, lng: -6.25876 },
        { lat: 53.34685, lng: -6.25872 },
        { lat: 53.34678, lng: -6.25864 },
        { lat: 53.34672, lng: -6.25856 },
        { lat: 53.3466, lng: -6.25837 },
        { lat: 53.34652, lng: -6.25825 },
        { lat: 53.34652, lng: -6.25824 },
        { lat: 53.34658, lng: -6.25813 },
      ],
    ],
    [
      [
        { lat: 53.34652, lng: -6.25824 },
        { lat: 53.34631, lng: -6.25793 },
        { lat: 53.34622, lng: -6.25779 },
        { lat: 53.34617, lng: -6.2577 },
        { lat: 53.34608, lng: -6.25757 },
        { lat: 53.34593, lng: -6.25736 },
        { lat: 53.34589, lng: -6.25731 },
      ],
      [
        { lat: 53.34589, lng: -6.25731 },
        { lat: 53.34586, lng: -6.25729 },
        { lat: 53.34583, lng: -6.25728 },
        { lat: 53.34581, lng: -6.25728 },
        { lat: 53.34579, lng: -6.25728 },
        { lat: 53.34576, lng: -6.25729 },
        { lat: 53.34574, lng: -6.2573 },
        { lat: 53.34571, lng: -6.25733 },
        { lat: 53.34568, lng: -6.25737 },
        { lat: 53.34567, lng: -6.25741 },
        { lat: 53.34562, lng: -6.25751 },
        { lat: 53.3456, lng: -6.25757 },
        { lat: 53.34559, lng: -6.25764 },
        { lat: 53.34555, lng: -6.25778 },
        { lat: 53.34547, lng: -6.25803 },
        { lat: 53.3454, lng: -6.25824 },
        { lat: 53.34533, lng: -6.25845 },
        { lat: 53.34528, lng: -6.25851 },
        { lat: 53.34517, lng: -6.25875 },
        { lat: 53.34501, lng: -6.25902 },
      ],
      [
        { lat: 53.34501, lng: -6.25902 },
        { lat: 53.34495, lng: -6.25902 },
        { lat: 53.3449, lng: -6.25903 },
        { lat: 53.34486, lng: -6.25905 },
        { lat: 53.34483, lng: -6.25906 },
        { lat: 53.3448, lng: -6.25908 },
        { lat: 53.34477, lng: -6.2591 },
        { lat: 53.34474, lng: -6.25914 },
        { lat: 53.3447, lng: -6.25919 },
        { lat: 53.34467, lng: -6.25923 },
        { lat: 53.34463, lng: -6.25926 },
        { lat: 53.3446, lng: -6.25929 },
        { lat: 53.34456, lng: -6.25932 },
        { lat: 53.34452, lng: -6.25933 },
        { lat: 53.34447, lng: -6.25934 },
        { lat: 53.34443, lng: -6.25933 },
        { lat: 53.34441, lng: -6.25933 },
        { lat: 53.34436, lng: -6.25931 },
      ],
    ],
  ]);
});

test("Fake Test", () => {
  expect(true).toBeTruthy();
});
